/* =================================================================
   Parkinson's Disease Detection System - Dark Glassmorphism Theme
   ================================================================= */

/* --- Design Tokens --- */
:root {
    --bg-deep:      #0f0c29;
    --bg-mid:       #302b63;
    --bg-surface:   #24243e;
    --accent-start: #667eea;
    --accent-end:   #764ba2;
    --glass-bg:     rgba(255, 255, 255, .06);
    --glass-border: rgba(255, 255, 255, .10);
    --glass-hover:  rgba(255, 255, 255, .10);
    --text-primary: rgba(255, 255, 255, .92);
    --text-secondary: rgba(255, 255, 255, .55);
    --text-muted:   rgba(255, 255, 255, .35);
    --radius-sm:    10px;
    --radius-md:    16px;
    --radius-lg:    20px;
    --shadow-card:  0 8px 32px rgba(0, 0, 0, .30);
    --font-family:  'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* --- Base --- */
*, *::before, *::after { box-sizing: border-box; }

body {
    font-family: var(--font-family);
    background: var(--bg-deep);
    color: var(--text-primary);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    -webkit-font-smoothing: antialiased;
}

/* Fixed full-screen gradient that never shows white */
body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -1;
    background: linear-gradient(135deg, var(--bg-deep) 0%, var(--bg-mid) 50%, var(--bg-surface) 100%);
}

.main-content { flex: 1; padding-top: 80px; padding-bottom: 70px; }

a { color: var(--accent-start); }
a:hover { color: #8b9ff5; }

::selection { background: rgba(102, 126, 234, .35); color: #fff; }

/* --- Scrollbar --- */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: var(--bg-deep); }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,.15); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,.25); }

/* =================================================================
   Navigation
   ================================================================= */
.glass-nav {
    background: rgba(15, 12, 41, .65) !important;
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--glass-border);
    padding: .6rem 0;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1030;
}

.brand-icon {
    display: inline-flex; align-items: center; justify-content: center;
    width: 34px; height: 34px; border-radius: 10px;
    background: linear-gradient(135deg, var(--accent-start), var(--accent-end));
    color: #fff; flex-shrink: 0;
}

.brand-text { font-weight: 700; font-size: 1.15rem; letter-spacing: -.02em; }

.glass-nav .nav-link {
    color: rgba(255,255,255,.6) !important; font-weight: 500; font-size: .9rem;
    padding: .45rem .85rem !important; border-radius: 8px; transition: all .2s ease;
}
.glass-nav .nav-link:hover,
.glass-nav .nav-link.active { color: #fff !important; background: rgba(255,255,255,.08); }
.glass-nav .nav-link i { font-size: .82rem; }

/* Navbar auth controls */
.nav-user-badge {
    display: flex; align-items: center; gap: 8px;
    background: rgba(255, 255, 255, .1); padding: 4px 12px 4px 4px; border-radius: 50px;
}
.nav-avatar {
    display: inline-flex; align-items: center; justify-content: center;
    width: 30px; height: 30px; border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-start), var(--accent-end));
    color: #fff; font-weight: 700; font-size: .82rem; flex-shrink: 0;
}
.nav-user-name { color: rgba(255,255,255,.9); font-size: .85rem; font-weight: 500; white-space: nowrap; }
.nav-logout-btn {
    display: inline-flex; align-items: center; justify-content: center;
    width: 32px; height: 32px; border-radius: 8px;
    background: rgba(255,255,255,.08); color: rgba(255,255,255,.6);
    text-decoration: none; transition: all .2s ease;
}
.nav-logout-btn:hover { background: rgba(220,53,69,.2); color: #ff6b7a; }
.nav-login-btn {
    display: inline-flex; align-items: center; padding: 6px 18px; border-radius: 50px;
    background: linear-gradient(135deg, var(--accent-start), var(--accent-end));
    color: #fff !important; text-decoration: none; font-size: .88rem; font-weight: 600;
    transition: all .25s ease; box-shadow: 0 2px 10px rgba(102,126,234,.3);
}
.nav-login-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 15px rgba(102,126,234,.45); color: #fff !important; }

/* =================================================================
   Footer
   ================================================================= */
.glass-footer {
    background: rgba(15, 12, 41, .65);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-top: 1px solid var(--glass-border);
    padding: 1.2rem 0;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1030;
}
.footer-brand { color: rgba(255,255,255,.7); font-weight: 600; font-size: .9rem; }
.footer-note  { color: rgba(255,255,255,.35); font-size: .8rem; }

/* =================================================================
   Icon Badge (large, used on feature cards)
   ================================================================= */
/* Large icon badge for feature cards */
.icon-badge-lg {
    display: inline-flex; align-items: center; justify-content: center;
    width: 56px; height: 56px; border-radius: 16px; font-size: 1.4rem; flex-shrink: 0;
    margin-bottom: .75rem;
}

/* =================================================================
   Typography helpers
   ================================================================= */
.text-gradient {
    background: linear-gradient(135deg, var(--accent-start), var(--accent-end));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    background-clip: text;
}
.section-title { font-weight: 800; font-size: 2rem; letter-spacing: -.03em; }
.section-subtitle { color: var(--text-secondary); font-size: 1.05rem; font-weight: 400; }

h1, h2, h3, h4, h5, h6 { color: var(--text-primary); font-weight: 700; }
p { color: var(--text-secondary); }
strong { color: var(--text-primary); }

/* Override Bootstrap's text-muted */
.text-muted { color: var(--text-muted) !important; }

/* =================================================================
   Buttons
   ================================================================= */
.btn-accent {
    background: linear-gradient(135deg, var(--accent-start), var(--accent-end));
    color: #fff; border: none; border-radius: var(--radius-sm); font-weight: 600;
    padding: .65rem 1.8rem; transition: all .25s ease;
    box-shadow: 0 4px 15px rgba(102,126,234,.3);
}
.btn-accent:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102,126,234,.45); color: #fff; }
.btn-accent:active { transform: translateY(0); }
.btn-accent:disabled { opacity: .5; cursor: not-allowed; transform: none; }

.btn-outline-glass {
    background: transparent; border: 1px solid rgba(255,255,255,.18); color: var(--text-primary);
    border-radius: var(--radius-sm); font-weight: 500; padding: .65rem 1.5rem; transition: all .2s ease;
}
.btn-outline-glass:hover { background: rgba(255,255,255,.06); color: #fff; }

/* Keep Bootstrap button variants usable but adapt for dark */
.btn-primary { background: linear-gradient(135deg, var(--accent-start), var(--accent-end)); border: none; }
.btn-primary:hover { box-shadow: 0 4px 15px rgba(102,126,234,.35); }
.btn-success { background: rgba(25,135,84,.8); border: none; }
.btn-warning { background: rgba(255,193,7,.8); border: none; color: #1a1a2e; }
.btn-info    { background: rgba(13,202,240,.7); border: none; color: #1a1a2e; }
.btn-danger  { background: rgba(220,53,69,.8); border: none; }
.btn-secondary { background: rgba(255,255,255,.1); border: 1px solid var(--glass-border); color: var(--text-primary); }
.btn-secondary:hover { background: rgba(255,255,255,.15); color: #fff; }
.btn-light  { background: rgba(255,255,255,.9); color: #1a1a2e; border: none; }

.btn { border-radius: var(--radius-sm); font-weight: 500; transition: all .2s ease; }
.btn:hover { transform: translateY(-1px); }
.btn-lg { padding: .75rem 2rem; font-size: 1.05rem; }

/* =================================================================
   Forms (dark-adapted)
   ================================================================= */
.form-control, .form-select {
    background: rgba(255,255,255,.06); border: 1px solid var(--glass-border);
    border-radius: var(--radius-sm); color: var(--text-primary);
    padding: .65rem 1rem; font-size: .95rem;
}
.form-control::placeholder { color: var(--text-muted); }
.form-control:focus, .form-select:focus {
    background: rgba(255,255,255,.1); border-color: var(--accent-start);
    box-shadow: 0 0 0 3px rgba(102,126,234,.2); color: var(--text-primary);
}
.form-label { color: var(--text-secondary); font-weight: 500; font-size: .88rem; }
.form-check-label { color: var(--text-secondary); }
.form-check-input { background-color: rgba(255,255,255,.1); border-color: var(--glass-border); }
.form-check-input:checked { background-color: var(--accent-start); border-color: var(--accent-start); }

textarea.form-control { resize: vertical; min-height: 100px; }

/* Input group */
.input-group-text {
    background: rgba(255,255,255,.06); border: 1px solid var(--glass-border);
    color: var(--text-muted);
}

/* =================================================================
   Bootstrap Card Overrides (make all .card glass)
   ================================================================= */
.card {
    background: var(--glass-bg);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-card);
    transition: transform .25s ease, box-shadow .25s ease;
    color: var(--text-primary);
}
.card:hover { transform: translateY(-3px); box-shadow: 0 12px 40px rgba(0,0,0,.35); }
.card .card-body { color: var(--text-secondary); }
.card .card-title { color: var(--text-primary); }
.card .card-text  { color: var(--text-secondary); }

/* Card headers */
.card-header {
    background: rgba(255,255,255,.04) !important; border-bottom: 1px solid var(--glass-border);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0 !important;
    color: var(--text-primary) !important; font-weight: 600;
}
/* Remove colored card header backgrounds - use accent text instead */
.card-header.bg-primary,
.card-header.bg-success,
.card-header.bg-info,
.card-header.bg-warning,
.card-header.bg-secondary {
    background: rgba(255,255,255,.04) !important;
}
.card-header.bg-primary  { border-left: 3px solid var(--accent-start); }
.card-header.bg-success  { border-left: 3px solid #75d9a0; }
.card-header.bg-info     { border-left: 3px solid #0dcaf0; }
.card-header.bg-warning  { border-left: 3px solid #ffc107; }
.card-header.bg-secondary { border-left: 3px solid rgba(255,255,255,.3); }

/* =================================================================
   Alerts (dark)
   ================================================================= */
.alert {
    border-radius: var(--radius-sm); border: none; font-size: .92rem;
}
.alert-success { background: rgba(25,135,84,.15); color: #75d9a0; border: 1px solid rgba(25,135,84,.2); }
.alert-danger  { background: rgba(220,53,69,.15); color: #ff6b7a; border: 1px solid rgba(220,53,69,.2); }
.alert-warning { background: rgba(255,193,7,.12); color: #ffe066; border: 1px solid rgba(255,193,7,.18); }
.alert-info    { background: rgba(13,202,240,.1); color: #80e5f5; border: 1px solid rgba(13,202,240,.15); }
.alert-primary { background: rgba(102,126,234,.12); color: #a5b4fc; border: 1px solid rgba(102,126,234,.18); }
.alert-secondary { background: rgba(255,255,255,.06); color: var(--text-secondary); border: 1px solid var(--glass-border); }

.alert-heading { color: inherit; font-weight: 700; }
.alert hr { border-color: rgba(255,255,255,.1); }

/* =================================================================
   Tables (dark)
   ================================================================= */
.table { color: var(--text-secondary); --bs-table-bg: transparent; }
.table thead { background: rgba(255,255,255,.06); }
.table thead th { color: var(--text-primary); font-weight: 600; font-size: .88rem; border-bottom: 1px solid var(--glass-border); }
.table td, .table th { border-color: var(--glass-border); }
.table-bordered { border-color: var(--glass-border); }
.table-sm td, .table-sm th { padding: .5rem .6rem; }

/* Inline table cell colors for confusion matrix */
.table .bg-success { background: rgba(25,135,84,.25) !important; color: #75d9a0 !important; }
.table .bg-warning { background: rgba(255,193,7,.2) !important; color: #ffe066 !important; }
.table .bg-danger  { background: rgba(220,53,69,.2) !important; color: #ff6b7a !important; }

/* =================================================================
   Progress Bar
   ================================================================= */
.progress {
    border-radius: var(--radius-sm); background: rgba(255,255,255,.08);
    height: 1.5rem; overflow: hidden;
}
.progress-bar {
    border-radius: var(--radius-sm); font-weight: 600; font-size: .85rem;
    background: linear-gradient(135deg, var(--accent-start), var(--accent-end));
}

/* =================================================================
   Tabs (dark)
   ================================================================= */
.nav-tabs {
    border-bottom: 1px solid var(--glass-border);
}
.nav-tabs .nav-link {
    color: var(--text-secondary); font-weight: 500; border: none;
    border-radius: var(--radius-sm) var(--radius-sm) 0 0;
    padding: .6rem 1rem; transition: all .2s ease;
}
.nav-tabs .nav-link:hover { color: var(--text-primary); background: rgba(255,255,255,.04); border-color: transparent; }
.nav-tabs .nav-link.active {
    background: rgba(255,255,255,.08); color: #fff; font-weight: 600;
    border: none; border-bottom: 2px solid var(--accent-start);
}

.nav-pills .nav-link {
    color: var(--text-secondary); font-weight: 500;
    border-radius: var(--radius-sm); transition: all .2s ease;
}
.nav-pills .nav-link.active {
    background: linear-gradient(135deg, var(--accent-start), var(--accent-end)); color: #fff;
}

/* =================================================================
   Code Blocks
   ================================================================= */
pre {
    background: rgba(0, 0, 0, .3) !important; border: 1px solid var(--glass-border);
    border-radius: var(--radius-sm); padding: 1rem; overflow-x: auto;
    color: #e0e0e0;
}
code { color: #c084fc; font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace; font-size: .88rem; }
pre code { color: #e0e0e0; }

/* =================================================================
   Lists
   ================================================================= */
ul { line-height: 1.9; }
ul li { color: var(--text-secondary); }

/* =================================================================
   Background helpers (override Bootstrap for dark theme)
   ================================================================= */
.bg-light { background: rgba(255,255,255,.04) !important; color: var(--text-primary) !important; }
.bg-dark  { background: rgba(0,0,0,.3) !important; }
.bg-primary { background: linear-gradient(135deg, var(--accent-start), var(--accent-end)) !important; }

/* =================================================================
   Stat Cards (used on performance & index)
   ================================================================= */
.stat-card {
    background: rgba(255,255,255,.04); border: 1px solid var(--glass-border);
    border-radius: var(--radius-md); padding: 1.2rem; text-align: center;
    transition: all .2s ease;
}
.stat-card:hover { background: rgba(255,255,255,.08); }
.stat-value { font-size: 2rem; font-weight: 800; line-height: 1.1; }
.stat-label { font-weight: 600; font-size: .9rem; color: var(--text-primary); margin-top: .3rem; }
.stat-sub   { font-size: .8rem; color: var(--text-muted); }

/* =================================================================
   Loading Spinner - Modern Dots
   ================================================================= */
.spinner-border { width: 3rem; height: 3rem; }

.loader-dots { display: inline-flex; align-items: center; gap: 6px; }
.loader-dots .dot {
    width: 10px; height: 10px; border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-start), var(--accent-end));
    animation: dotBounce .6s ease-in-out infinite;
}
.loader-dots .dot:nth-child(2) { animation-delay: .1s; }
.loader-dots .dot:nth-child(3) { animation-delay: .2s; }
@keyframes dotBounce {
    0%, 80%, 100% { transform: scale(.6); opacity: .4; }
    40% { transform: scale(1); opacity: 1; }
}

/* =================================================================
   Animations
   ================================================================= */
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(24px); }
    to   { opacity: 1; transform: translateY(0); }
}
.fade-in-up { animation: fadeInUp .5s ease-out both; }
.fade-in-up-d1 { animation-delay: .1s; }
.fade-in-up-d2 { animation-delay: .2s; }
.fade-in-up-d3 { animation-delay: .3s; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.fade-in { animation: fadeIn .5s ease-in; }

@keyframes blink {
    0%, 50%, 100% { opacity: 1; }
    25%, 75%      { opacity: 0; }
}
.blink { animation: blink 1.5s linear infinite; }

/* =================================================================
   Toast (dark)
   ================================================================= */
.toast {
    background: rgba(30, 30, 50, .95) !important; backdrop-filter: blur(12px);
    border: 1px solid var(--glass-border); border-radius: var(--radius-sm);
}

/* =================================================================
   Misc helpers
   ================================================================= */
.border-accent { border-color: var(--accent-start) !important; }
.divider { border-top: 1px solid var(--glass-border); }
.rounded-xl { border-radius: var(--radius-lg); }

/* Image inside dark cards */
.card img { border-radius: var(--radius-sm); }

/* Sticky card override */
.sticky-top { top: 20px; }

/* Badge */
.badge-glass {
    display: inline-block; padding: .3rem .7rem; border-radius: 50px;
    background: rgba(255,255,255,.08); color: var(--text-secondary);
    font-size: .78rem; font-weight: 500;
}

/* btn-group fix for dark */
.btn-group .btn { border-radius: var(--radius-sm) !important; }
.btn-group .btn + .btn { margin-left: 4px; }

/* =================================================================
   DL Explainability Visualizations
   ================================================================= */

/* Attention Weights Bar Chart */
.attention-chart { margin-top: 1rem; }
.attention-bar-row {
    display: flex; align-items: center; margin-bottom: .6rem;
}
.attention-bar-label {
    width: 110px; flex-shrink: 0; font-size: .82rem;
    color: var(--text-secondary); font-weight: 500;
}
.attention-bar-track {
    flex: 1; height: 26px; background: rgba(255,255,255,.06);
    border-radius: 6px; overflow: hidden; position: relative;
}
.attention-bar-fill {
    height: 100%; border-radius: 6px;
    transition: width .6s ease-out;
    display: flex; align-items: center; justify-content: flex-end;
    padding-right: 8px; font-size: .75rem; font-weight: 600;
    color: #fff; min-width: 36px;
}
.attention-bar-fill.speech     { background: linear-gradient(90deg, #667eea, #764ba2); }
.attention-bar-fill.handwriting { background: linear-gradient(90deg, #43b98e, #75d9a0); }
.attention-bar-fill.gait       { background: linear-gradient(90deg, #f5af19, #ffc107); }

/* Feature Importance Bars (Grad-CAM) */
.feature-importance-section { margin-top: 1.2rem; }
.fi-modality-title {
    font-size: .85rem; font-weight: 600; margin-bottom: .5rem;
    color: var(--text-primary);
}
.fi-bar-row {
    display: flex; align-items: center; margin-bottom: 3px;
}
.fi-bar-name {
    width: 140px; flex-shrink: 0; font-size: .7rem;
    color: var(--text-muted); overflow: hidden;
    text-overflow: ellipsis; white-space: nowrap;
}
.fi-bar-track {
    flex: 1; height: 14px; background: rgba(255,255,255,.04);
    border-radius: 4px; overflow: hidden;
}
.fi-bar-fill {
    height: 100%; border-radius: 4px;
    transition: width .5s ease-out;
}
.fi-bar-value {
    width: 42px; flex-shrink: 0; text-align: right;
    font-size: .7rem; color: var(--text-muted); padding-left: 6px;
}

/* SE Channel Weights mini-bars */
.se-weights-container {
    margin-top: .6rem; display: flex; gap: 2px;
    height: 28px; align-items: flex-end;
}
.se-weight-bar {
    flex: 1; border-radius: 3px 3px 0 0;
    transition: height .5s ease-out;
    min-height: 2px;
}

/* Model type badge */
.model-type-badge {
    display: inline-flex; align-items: center; gap: 6px;
    padding: .35rem .8rem; border-radius: 50px; font-size: .78rem;
    font-weight: 600; letter-spacing: .02em;
}
.model-type-badge.dl {
    background: linear-gradient(135deg, rgba(102,126,234,.25), rgba(118,75,162,.25));
    border: 1px solid rgba(102,126,234,.35);
    color: #a5b4fc;
}
.model-type-badge.sklearn {
    background: rgba(25,135,84,.2);
    border: 1px solid rgba(25,135,84,.3);
    color: #75d9a0;
}

/* DL results expand/collapse */
.dl-section-toggle {
    cursor: pointer; user-select: none;
    display: flex; justify-content: space-between;
    align-items: center; padding: .4rem 0;
    border-bottom: 1px solid var(--glass-border);
    margin-bottom: .6rem;
}
.dl-section-toggle h6 { margin: 0; font-size: .9rem; }
.dl-section-toggle .toggle-icon {
    transition: transform .2s; font-size: .75rem;
    color: var(--text-muted);
}
.dl-section-toggle.collapsed .toggle-icon { transform: rotate(-90deg); }

/* =================================================================
   Responsive
   ================================================================= */
@media (max-width: 768px) {
    .section-title { font-size: 1.6rem; }
    .stat-value { font-size: 1.5rem; }
    .glass-card .card-inner { padding: 1rem; }
    .card-body { padding: 1rem; }
    .main-content { padding: 1.5rem 0; }
}
